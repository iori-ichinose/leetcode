# 1105. 填充书架

## [原题](https://leetcode-cn.com/problems/filling-bookcase-shelves)

__~~谁他妈读得懂你写的什么狗屁玩意~~__

附近的家居城促销，你买回了一直心仪的可调节书架，打算把自己的书都整理到新的书架上。

你把要摆放的书`books`都整理好，叠成一摞：从上往下，第`i`本书的厚度为`books[i][0]`，高度为`books[i][1]`。

按顺序 将这些书摆放到总宽度为`shelf_width`的书架上。

先选几本书放在书架上（它们的厚度之和小于等于书架的宽度`shelf_width`），然后再建一层书架。重复这个过程，直到把所有的书都放在书架上。

需要注意的是，在上述过程的每个步骤中，摆放书的顺序与你整理好的顺序相同。 例如，如果这里有`5`本书，那么可能的一种摆放情况是：第一和第二本书放在第一层书架上，第三本书放在第二层书架上，第四和第五本书放在最后一层书架上。

每一层所摆放的书的最大高度就是这一层书架的层高，书架整体的高度为各层高之和。

以这种方式布置书架，返回书架整体可能的最小高度。

## 解题思路

此题语言描述有 __亿点__ 抽象，但是基本意思大概是我们有n本书，要将他们按顺序从第一层往下摆放，但不要求每一层必须摆满；由于每本书的高度不同，因此不同的摆放方式需要的层数也不同，譬如书架长度为`4`，有三本书，其长宽分别为`[2,2],[2,4],[2,4]`，假如一二两本书放在第一层，第三本放在第二层，书架的总高度就是`8=4+4`，但假如把第一本书放在第一层，余下两本全部放在第二层，书架的总高度就是`6=2+4`，此题就要找出可能的最小的书架层数。

求解本题可以运用动态规划法，设`dp`数组存放每本书在放置时书架的最小高度，令`dp[0]=0`,余下元素均为`inf`，遍历`book`的每一本书，对于每本书，假设他们都处于书架最后，于是都从后向前依次检查是否可以向前移动，`dp[i] = min(dp[i], dp[j - 1] + h)`，其中`j`为第`i`本书前的一本书，`h`为其高度，全部遍历完后，`dp`数组最后一个元素就是放入全部书后的最小高度。

## 代码实现

```Python
class Solution:
    def minHeightShelves(self, books: list, shelf_width: int) -> int:
        n = len(books)
        dp = [1000000] * (n + 1)
        dp[0] = 0

        for i in range(1, n + 1):
            width, cur_book, cur_height = 0, i, 0
            while cur_book > 0:
                width += books[cur_book - 1][0]
                if width > shelf_width:
                    break
                cur_height = max(cur_height, books[cur_book - 1][1])
                dp[i] = min(dp[i], dp[cur_book - 1] + cur_height)
                cur_book -= 1

        return dp[-1]
```
